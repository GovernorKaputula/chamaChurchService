<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mwila & Chama‚Äôs Wedding | 29.11.2025</title>

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <nav class="site-navigation sticky-nav">
        <ul>
            <li><a href="#hero">Home</a></li>
            <li><a href="#story">Our Story</a></li>
            <li><a href="#timeline">Timeline</a></li>
            <li><a href="#rsvp">RSVP</a></li>
            <li><a href="#gallery">Gallery</a></li>
        </ul>
    </nav>

    <main>
        <header class="hero" id="hero" style="background-image: url('images/wed4.jpg');"> 
            <div class="hero-content" data-scroll>
                <p class="pre-heading">The wedding of</p>
                <h1 class="couple-names">Mwila & Chama</h1>
                <p class="date">29th November 2025</p>
            </div>
        </header>
        
        <section id="story" class="content-section" data-scroll>
            <div class="invitation-message" data-scroll="fade-up">
                 <h2>We invite you to celebrate our union!</h2>
                 <p class="readable-text">
                     With hearts full of love and gratitude, the Mbulakulima and Musonda families , request the pleasure of your company as their Children Mwila and Chama exchange vows and begin their journey as husband and wife. Your presence will be our greatest gift.
                     <strong>Please join us in Lusaka, Zambia.</strong>
                 </p>
            </div>

            <div class="couple-intro-container">
                <div class="couple-card" data-scroll="fade-right">
                    <img src="images/mwila.jpg" alt="Chama Musonda, The Bride" class="profile-photo" />
                    <h3>Mwila Mbulakulima</h3>
                    <p>The Groom</p>
                </div>
                <div class="couple-card" data-scroll="fade-left">
                    <img src="images/chama.jpg" alt="Mwila Mbulakulima, The Groom" class="profile-photo" />
                    <h3>Chama Musonda</h3>
                    <p>The Bride</p>
                </div>
            </div>
        </section>

        <section id="countdown-section" class="countdown-section" data-scroll>
            <h2>Until We Say "I Do"</h2>
            <div class="countdown-timer" id="countdown">
                <div class="time-unit"><span id="days">00</span><small>Days</small></div>
                <div class="time-unit"><span id="hours">00</span><small>Hours</small></div>
                <div class="time-unit"><span id="minutes">00</span><small>Minutes</small></div>
                <div class="time-unit"><span id="seconds">00</span><small>Seconds</small></div>
            </div>
        </section>

        <section id="timeline" class="content-section" data-scroll>
            <h2>The Wedding Timeline</h2>
            <div class="event-details">
                
                <div class="event ceremony" data-scroll="fade-up">
                    <h4><span class="event-icon"><i class="fa-solid fa-church"></i></span> The Ceremony</h4>
                    <p class="time-details">
                        <strong>09:30 hrs:</strong> Guests arrive and are seated.<br>
                        <strong>10:00 hrs:</strong> Procession begins.<br>
                        <strong>11:30 hrs:</strong> Ceremony concludes.
                    </p>
                    <address>St. Ignatius Catholic Church, Lusaka</address>
                    <a href="https://maps.google.com/?cid=1222717358917862993" target="_blank" class="map-link">View Directions</a>
                </div>
                    <hr class="event-divider">

                <div class="event photos-break" data-scroll="fade-up">
                    <h4><span class="event-icon"><i class="fa-solid fa-camera"></i></span> The Photoshoot</h4> 
                    <p class="time-details">
                        <strong>11:30 hrs - 16:00 hrs:</strong> This period is reserved for the bridal party's photoshoot and travel to the reception venue.
                    </p>
               </div>

                <hr class="event-divider">

                <div class="event reception" data-scroll="fade-up">
                    <h4><span class="event-icon"><i class="fa-solid fa-champagne-glasses"></i></span> The Reception</h4>
                    <p class="time-details">
                        <strong>17:30 hrs:</strong> Dinner Service begins.<br>
                        <strong>19:00 hrs:</strong> Cake Cutting & First Dance.<br>
                        <strong>19:30 hrs:</strong> Dance Floor Opens!
                    </p>
                    <address>Radisson Blu Hotel, Lusaka, Theme: "Shade Of Black "</address>
                    <a href="https://maps.google.com/?cid=72219736927252305" target="_blank" class="map-link">View Directions</a>
                </div>
            </div>
        </section>

        <section id="rsvp" class="form-section content-section" data-scroll>
            <h2>RSVP: Will You Join Our Celebration?</h2>
            <p class="readable-text">
                We can't wait to share our special day with you! Kindly confirm your attendance by **15th November 2025**.
            </p>

            <form id="rsvp-form" class="rsvp-form" target="response-iframe"> 
                <div class="form-group">
                    <label for="name">Your Full Name(s)</label>
                    <input type="text" id="name" name="name" required placeholder="e.g., Bright Mulenga" />
                </div>
                
                <div class="form-group attendance-group">
                    <label for="attending">Will you be attending?</label>
                    <select id="attending" name="attending" required>
                        <option value="">-- Please Select --</option>
                        <option value="Yes">Joyfully Attending üéâ</option>
                        <option value="No">Regretfully Declining üòî</option>
                    </select>
                </div>

             <div class="form-group guest-count-group">
 <label for="guests">Total Number in your party (including yourself)</label>
 <input 
  type="number" id="guests"  name="guests"  value="1"  readonly  required 
 />
</div>

                
                <div class="form-group">
                    <label for="dietary">Dietary Needs or Allergies (Optional)</label>
                    <textarea id="dietary" name="dietary" rows="3" placeholder="e.g., Vegetarian, Gluten-Free, Nut allergy..."></textarea>
                </div>
                <p class="readable-text">"Gifts In monetary Form Shall Be Highly Aprreciated!"</p>
                <strong><p class="readable-text">Please Note:</p></strong>
                <p class="readable-text">1. This Card is not Transferrable</p>
                <p class="readable-text">2. No Kids Allowed</p>
                <p class="readable-text">3. This is a "one person" card (No Mr And Mrs)</p>
                <p class="readable-text">4. we will not consider any RSVP after **November 15th 2025** </p>
                <button id="rsvp-submit-button" type="submit" class="cta-button pulse">Submit RSVP</button>
            </form>

            <div id="rsvp-message" class="hidden-message"></div>
            <iframe name="response-iframe" id="response-iframe" style="display:none;"></iframe>
        </section>

        <section id="gallery" class="content-section" data-scroll>
            <h2>Gallery</h2>
            <p class="readable-text">A few moments from our journey together.</p>
            
            <div class="photo-grid-5">
                
                <div class="main-photo" data-scroll="fade-up">
                    <img src="images/wed2.jpg" alt="Couple photo 1" role="button">
                </div>

                <div class="sub-photos">
                    
                    <img src="images/wed3.jpg" alt="Couple photo 3" data-scroll="fade-up" data-scroll-delay="200" role="button">
                    <img src="images/wed1.jpg" alt="Couple photo 4" data-scroll="fade-up" data-scroll-delay="300" role="button">
                    
                </div>

            </div>
            
            <div class="contact-details" data-scroll="fade-up">
                 <h3>For Event Details, Kindly Contact:</h3>
                 <p><strong>Chaile Phiri</strong> (From Him): <a href="tel:+26097732180">+260 977 326 180</a></p>
                 <p><strong>Bertha Pandwe.</strong> (From Her): <a href="tel:+260979133402">+260 979 133 402</a></p>
            </div>
        </section>
    </main>

    <footer>
        <p>
            ¬© Mwila & Chama 2025 | #MwilaAndChamaSayIDo
            <br>
            Designed by <a href="https://www.yellowphase.org" target="_blank" rel="noopener noreferrer">Yellowphase</a>
        </p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // === 1. SCROLL REVEAL (Omitted for brevity) ===
            const scrollElements = document.querySelectorAll("[data-scroll]");
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("scrolled");
                        observer.unobserve(entry.target);
                    }
                });
            }, { root: null, threshold: 0.15, rootMargin: "0px 0px -50px 0px" });
            scrollElements.forEach(el => observer.observe(el));

            // === 2. COUNTDOWN TIMER (Omitted for brevity) ===
            const countdownContainer = document.getElementById("countdown-section");
            const countdownDate = new Date("Nov 29, 2025 10:00:00 GMT+02:00").getTime();
            
            const timer = setInterval(() => {
                const now = new Date().getTime();
                const distance = countdownDate - now;
                
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                const daysEl = document.getElementById("days");
                const hoursEl = document.getElementById("hours");
                const minutesEl = document.getElementById("minutes");
                const secondsEl = document.getElementById("seconds");

                if (daysEl) daysEl.textContent = days.toString().padStart(2, '0');
                if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
                if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, '0');
                if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, '0');

                if (distance < 0) {
                    clearInterval(timer);
                    if (countdownContainer) {
                        countdownContainer.innerHTML = "<h2>The celebration is underway!</h2>";
                    }
                }
            }, 1000);

            // === 3. GOOGLE SHEETS RSVP SUBMISSION (MODIFIED FOR IFRAME) ===
            const form = document.getElementById('rsvp-form');
            const messageDiv = document.getElementById('rsvp-message');
            const submitButton = document.getElementById('rsvp-submit-button');
            const iframe = document.getElementById('response-iframe');

            // NOTE: Replace this with your actual deployed Google Apps Script URL
            const scriptURL = "https://script.google.com/macros/s/AKfycbzy3Nz7vwggV2nTqxhxxm5ZNdR7BS_ILbaSyE0WSQhf2ORsF6nA4crHJ_UXtAmQDcja/exec";

            // **STEP 4: Set form action and method for GET/doGet**
            form.setAttribute('action', scriptURL);
            form.setAttribute('method', 'GET'); 

            form.addEventListener('submit', (e) => {
                
                // --- Client-side Validation ---
                const attendingSelect = document.getElementById('attending');
                const attendingStatusValue = attendingSelect ? attendingSelect.value : "";
                
                if (document.getElementById('name').value.trim() === "" || attendingStatusValue === "") {
                    e.preventDefault(); // Prevent submission if validation fails
                    messageDiv.textContent = "‚ö†Ô∏è Please fill in your name and select an attendance status.";
                    messageDiv.style.display = 'block';
                    submitButton.disabled = false;
                    return;
                }
                
                // --- Submission Process ---
                // Set loading message
                messageDiv.textContent = "‚è≥ Submitting your RSVP...";
                messageDiv.style.display = 'block';
                submitButton.disabled = true;

                // Set up the event listener for the iframe load event
                // This fires when the Google Script finishes and loads its JSON response into the hidden iframe
                iframe.onload = function() {
                    // We assume success since the script successfully ran (doGet)
                    messageDiv.textContent = "‚úÖ Your RSVP has been submitted successfully! Thank you!";
                    messageDiv.style.display = 'block';
                    form.reset();
                    submitButton.disabled = false;
                    // Important: Clear the onload listener after use
                    iframe.onload = null; 
                    
                    // Optional: Scroll to the message/top of RSVP section
                    document.getElementById('rsvp').scrollIntoView({ behavior: 'smooth' });
                };

                // The form submits automatically now because e.preventDefault() was not called 
                // outside of the validation check. The submission targets the hidden iframe.
            });
        });
    </script>
</body>
</html>
